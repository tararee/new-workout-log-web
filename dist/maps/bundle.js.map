{"version":3,"sources":["app.js","define.js","log.js","auth.js"],"names":["$","document","ready","WorkoutLog","undefined","API_BASE","location","hostname","setAuthHeader","sessionToken","window","localStorage","setItem","ajaxSetup","headers","Authorization","jQuery","on","e","token","getItem","this","hasClass","preventDefault","target","attr","log","setDefinitions","setHistory","which","is","trigger","extend","definition","userDefinitions","create","def","desc","val","type","postData","define","ajax","url","data","JSON","stringify","contentType","done","push","fail","console","fetchAll","err","workouts","defs","len","length","opts","i","id","description","children","remove","append","history","lis","result","itsLog","text","logger","fetchDefs","message","afterSignin","removeClass","signup","username","password","user","modal","show","login","loginout","removeItem"],"mappings":"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","file":"bundle.js","sourcesContent":["$(document).ready(function() {\n\tvar WorkoutLog = (function($, undefined) {\n\t\t// var API_BASE = location.hostname === \"localhost//workoutapi-name-tararee.herokuapp.com/api/\";\n\t\tvar API_BASE = location.hostname === \"localhost\" ?\n\t\t\t\"//localhost:3000/api/\" : \n\t\t\t\"//workoutapi-name-tararee.herokuapp.com/api/\";\n\t\tvar setAuthHeader = function(sessionToken) {\n\t\t\twindow.localStorage.setItem(\"sessionToken\", sessionToken);\n\t\t\t\n\t\t\t$.ajaxSetup({\n\t\t\t\t\"headers\": {\n\t\t\t\t\t\"Authorization\": sessionToken\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tAPI_BASE: API_BASE,\n\t\t\tsetAuthHeader: setAuthHeader\n\t\t};\n\t})(jQuery);\n\t\n\t// Ensure .disabled aren't clickable\n\t$(\".nav-tabs a[data-toggle=tab]\").on(\"click\", function(e) {\n\t  var token = window.localStorage.getItem(\"sessionToken\");\n\t  if ($(this).hasClass(\"disabled\") && !token) {\n\t     e.preventDefault();\n\t     return false;\n\t  }\n\t});\n\n\t// bind tab change events\n\t$(\"a[data-toggle=tab]\").on(\"shown.bs.tab\", function(e) {\n\t\tvar target = $(e.target).attr(\"href\");\n\t\tif (target === \"#log\") {\n\t\t\tWorkoutLog.log.setDefinitions();\n\t\t}\n\t\tif (target === \"#history\") {\n\t\t\tWorkoutLog.log.setHistory();\n\t\t}\n\t});\n\n  // bind enter key\n   $(document).on(\"keypress\", function(e) {\n      if (e.which === 13) { // enter key\n         if ($(\"#signup-modal\").is(\":visible\")) {\n            $(\"#signup\").trigger(\"click\");\n         }\n         if ($(\"#login-modal\").is(\":visible\")) {\n            $(\"#login\").trigger(\"click\");\n         }\n      }\n   });\n\n\tvar token = window.localStorage.getItem(\"sessionToken\");\n\tif (token) {\n\t\tWorkoutLog.setAuthHeader(token);\n\t}\n\n\twindow.WorkoutLog = WorkoutLog;\n\n\n\t\n\t\t// $(\"#testAPI\").on(\"click\", function() {\n\t// \tconsole.log(\"its working\");\n\n\t// \tvar test = $.ajax({\n\t// \t\ttype: \"GET\",\n\t// \t\turl: \"http://localhost:3000/api/test\"\n\t// \t});\n\n\t// \ttest.done(function(data) {\n\t// \t\tconsole.log(data);\n\t// \t});\n\n\t// \ttest.fail(function() {\n\t// \t\tconsole.log(\"oh noes!!!\");\n\t// \t});\n\t// });\n});","$(function() {\n\t$.extend(WorkoutLog,{\n\t\tdefinition: {\n\t\t\tuserDefinitions: [],\n\t\t\tcreate: function() {\n\t\t\t\tvar def = {\n\t\t\t\t\tdesc: $(\"#def-description\").val(),\n\t\t\t\t\ttype: $(\"#def-logtype\").val()\n\t\t\t\t};\n\t\t\t\tvar postData = { definition: def };\n\t\t\t\tvar define = $.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\n\t\t\t\t\tdata: JSON.stringify(postData),\n\t\t\t\t\tcontentType: 'application/json'\n\t\t\t\t});\n\n\t\t\t\tdefine.done(function(data) {\n\t\t\t\t\tWorkoutLog.definition.userDefinitions.push(data.definition);\n\t\t\t\t});\n\n\t\t\t\tdefine.fail(function() {\n\t\t\t\t\tconsole.log('oh no');\n\t\t\t\t});\n\t\t\t},\n\t\t\tfetchAll: function() {\n\t\t\t\tvar getDefs = $.ajax({\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tWorkoutLog.definition.userDefinitions = data;\n\t\t\t\t})\n\t\t\t\t.fail(function(err) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t$(\"#def-save\").on(\"click\", WorkoutLog.definition.create);\n\n\tif (window.localStorage.getItem(\"sessionToken\")) {\n\t\tWorkoutLog.definition.fetchAll();\n\t}\n});","$(function() { // same as $(document).ready(function() {\n\t$.extend(WorkoutLog, {\n\t\tlog: {\n\t\t\tworkouts: [],\n\t\t\t\n\t\t\tsetDefinitions: function() {\n\t\t\t\tvar defs = WorkoutLog.definition.userDefinitions;\n\t\t\t\tvar len = defs.length;\n\t\t\t\tvar opts = \"\";\n\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\topts += \"<option value='\" + defs[i].id + \"'>\" + defs[i].description + \"</option>\";\n\t\t\t\t}\n\t\t\t\t$(\"#log-definition\").children().remove();\n\t\t\t\t$(\"#log-definition\").append(opts);\n\t\t\t},\n\n\t\t\tsetHistory: function() {\n\t\t\t\tvar history = WorkoutLog.log.workouts;\n\t\t\t\tvar len = history.length;\n\t\t\t\tvar lis = \"\";\n\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\tvar result = history[i].result === \"\" ? \"No result found\" : history[i].result;\n\t\t\t\t\tlis += \"<li class='list-group-item'>\" + history[i].def + \" - \" + result + \"</li>\";\n\t\t\t\t}\n\t\t\t\t$(\"#history-list\").children().remove();\n\t\t\t\t$(\"#history-list\").append(lis);\n\t\t\t},\n\n\t\t\tcreate: function() {\n\t\t\t\tvar itsLog = {\n\t\t\t\t\tdesc: $(\"#log-description\").val(),\n\t\t\t\t\tresult: $(\"#log-result\").val(),\n\t\t\t\t\tdef: $(\"#log-definition option:selected\").text()\n\t\t\t\t};\n\n\t\t\t\tvar postData = { log: itsLog };\n\t\t\t\tvar logger = $.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\n\t\t\t\t\tdata: JSON.stringify(postData),\n\t\t\t\t\tcontentType: \"application/json\"\n\t\t\t\t});\n\n\t\t\t\tlogger.done(function(data) {\n\t\t\t\t\tWorkoutLog.log.workouts.push(data);\n\t\t\t\t});\n\n\t\t\t\tlogger.fail(function() {\n\t\t\t\t\tconsole.log(\"something broke\");\n\t\t\t\t});\n\n\t\t\t},\n\n\t\t\tfetchAll: function() {\n\t\t\t\tvar fetchDefs = $.ajax({\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfetchDefs.done(function(data) {\n\t\t\t\t\tWorkoutLog.log.workouts = data;\n\t\t\t\t});\n\n\t\t\t\tfetchDefs.fail(function(err) {\n\t\t\t\t\tconsole.log(\"an error occured\" + err.message);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t$(\"#log-save\").on(\"click\", WorkoutLog.log.create);\n\n\tif (window.localStorage.getItem(\"sessionToken\")) {\n\t\tWorkoutLog.log.fetchAll();\n\t}\n});","$(function() {\n\t$.extend(WorkoutLog, {\n\t\tafterSignin: function(sessionToken) {\n\t\t\tWorkoutLog.setAuthHeader(sessionToken);\n\t\t\tWorkoutLog.definition.fetchAll();\n\t\t\tWorkoutLog.log.fetchAll();\n\t\t\t$(\".disabled\").removeClass(\"disabled\");\n\t\t\t$(\"#loginout\").text(\"Logout\");\n\t\t},\n\t\tsignup: function() {\n\t\t\tvar username = $(\"#su_username\").val();\n\t\t\tvar password = $(\"#su_password\").val();\n\t\t\tvar user = { \n\t\t\t\tuser: { \n\t\t\t\t\tusername: username,\n\t\t\t\t\tpassword: password \n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar signup = $.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\n\t\t\t\tdata: JSON.stringify( user ),\n\t\t\t\tcontentType: \"application/json\"\n\t\t\t});\n\n\t\t\tsignup.done(function(data) {\n\t\t\t\tif (data.sessionToken) {\n\t\t\t\t\tWorkoutLog.afterSignin(data.sessionToken);\n\t\t\t\t\t$(\"#signup-modal\").modal(\"hide\");\n\t\t\t\t}\n\n\t\t\t}).fail(function() {\n\t\t\t\t$(\"#su_error\").text(\"There was an issue with sign up\").show();\n\t\t\t});\n\t\t},\n\n\t\tlogin: function() {\n\t\t\tvar username = $(\"#li_username\").val();\n\t\t\tvar password = $(\"#li_password\").val();\n\t\t\tvar user = { \n\t\t\t\tuser: { \n\t\t\t\t\tusername: username,\n\t\t\t\t\tpassword: password \n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar login = $.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\n\t\t\t\tdata: JSON.stringify( user ),\n\t\t\t\tcontentType: \"application/json\"\n\t\t\t});\n\n\t\t\tlogin.done(function(data) {\n\t\t\t\tif (data.sessionToken) {\n\t\t\t\t\tWorkoutLog.afterSignin(data.sessionToken);\n\t\t\t\t\t$(\"#login-modal\").modal(\"hide\");\n\t\t\t\t}\n\t\t\t}).fail(function() {\n\t\t\t\t$(\"#li_error\").text(\"There was an issue with sign up\").show();\n\t\t\t});\n\t\t},\n\n\t\tloginout: function() {\n\t\t\tif (window.localStorage.getItem(\"sessionToken\")) {\n\t\t\t\twindow.localStorage.removeItem(\"sessionToken\");\n\t\t\t\t$(\"#loginout\").text(\"Login\");\n\t\t\t}\n\n\t\t\t// TODO: on logout make sure stuff is disabled\n\t\t}\t\n\t});\n\n\t// bind events\n\t$(\"#login\").on(\"click\", WorkoutLog.login);\n\t$(\"#signup\").on(\"click\", WorkoutLog.signup);\n\t$(\"#loginout\").on(\"click\", WorkoutLog.loginout);\n\n\tif (window.localStorage.getItem(\"sessionToken\")) {\n\t\t$(\"#loginout\").text(\"Logout\");\n\t}\n});\n\n"],"sourceRoot":"/source/"}